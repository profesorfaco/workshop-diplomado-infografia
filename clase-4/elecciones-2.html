<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />

        <title>Presidenciables</title>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col">
                    <!--este es un grupo-->
                    <div class="input-group input-group-sm my-5">
                        <label class="input-group-text">REGIÓN</label>
                        <select id="selector" class="form-select">
                            <option value="0">ARICA Y PARINACOTA</option>
                            <option value="1">TARAPACA</option>
                            <option value="2">ANTOFAGASTA</option>
                            <option value="3">ATACAMA</option>
                            <option value="4">COQUIMBO</option>
                            <option value="5">VALPARAISO</option>
                            <option value="6">METROPOLITANA DE SANTIAGO</option>
                            <option value="7">EL LIBERTADOR GENERAL BERNARDO O'HIGGINS</option>
                            <option value="8">MAULE</option>
                            <option value="9">ÑUBLE</option>
                            <option value="10">BIOBÍO</option>
                            <option value="11">LA ARAUCANÍA</option>
                            <option value="12">LOS RÍOS</option>
                            <option value="13">LOS LAGOS</option>
                            <option value="14">AYSEN DEL GENERAL CARLOS IBAÑEZ DEL CAMPO</option>
                            <option value="15">MAGALLANES Y DE LA ANTARTICA CHILENA</option>
                        </select>
                    </div>

                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 120" style="w-100">
                        <style type="text/css">
                            text {
                                font-size: 11px;
                            }
                        </style>
                        <g>
                            <circle fill="#fafafa" cx="50" cy="50" r="50" />
                            <circle fill="#fafafa" cx="150" cy="50" r="50" />
                            <circle fill="#fafafa" cx="250.1" cy="50" r="50" />
                        </g>
                        <g>
                            <text transform="matrix(1 0 0 1 37 113.3652)">Boric</text>
                            <text transform="matrix(1 0 0 1 139 113.3652)">Kast</text>
                            <text transform="matrix(1 0 0 1 237 113.3652)">Etc.</text>
                        </g>
                        <g id="pelotas"></g>
                    </svg>
                </div>
            </div>
        </div>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.1/papaparse.min.js"
            integrity="sha512-EbdJQSugx0nVWrtyK3JdQQ/03mS3Q1UiAhRtErbwl1YL/+e2hZdlIcSURxxh7WXHTzn83sjlh2rysACoJGfb6g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script>
            const selector = document.getElementById("selector");
            const seleccion = document.getElementById("seleccion");
            var seleccionado;
            Papa.parse("https://raw.githubusercontent.com/profesorfaco/infografia/main/clase-4/dato_preliminar_servel.csv", {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function (results) {
                    var datos = results.data;
                    console.log(datos);
                    
                    const donde = document.getElementById("pelotas");

                    selector.onchange = function () {
                        x = selector.value;
                        pelotas.innerHTML = '<circle fill="green" cx="50" cy="50" r="' + datos[x]["boric"] / 2 +'"/><circle fill="red" cx="150" cy="50" r="' + datos[x]["kast"] / 2 + '"/><circle fill="blue" cx="250.1" cy="50" r="' + (datos[x]["provoste"] + datos[x]["sichel"] + datos[x]["artes"] + datos[x]["parisi"] + datos[x]["meo"]) / 2 + '"/>';
                    };
                    selector.onchange();

                },
            });
        </script>
    </body>
</html>